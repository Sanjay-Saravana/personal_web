<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin | Sanjay Saravanan</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="admin-body">
    <header class="site-header" id="top">
      <nav class="nav container">
        <a class="brand" href="index.html">← Back to Portfolio</a>
        <div class="header-right">
          <div class="header-actions">
            <button id="theme-toggle" class="icon-btn" aria-label="Toggle light and dark mode">☀️</button>
          </div>
        </div>
      </nav>
    </header>

    <main class="container admin-page">
      <section class="admin-card reveal visible">
        <h1>Admin Panel</h1>
        <p>Login and manage your portfolio content stored in Supabase.</p>

        <form id="login-form" class="admin-form">
          <h2>Admin Login</h2>
          <input type="email" name="email" placeholder="Admin email" required />
          <input type="password" name="password" placeholder="Password" required />
          <button class="btn btn-primary" type="submit">Login</button>
        </form>

        <div id="admin-tools" hidden>
          <p class="success" id="auth-status">Logged in.</p>

          <h2>Manage Portfolio Items (CRUD)</h2>

          <form class="admin-form portfolio-form" data-type="web_apps">
            <input type="hidden" name="item-id" />
            <h3>Web App Entry</h3>
            <input name="title" placeholder="App title" required />
            <input name="url" placeholder="https://..." />
            <div class="editor-toolbar" data-for="editor-web_apps">
              <button type="button" data-cmd="bold"><strong>B</strong></button>
              <button type="button" data-cmd="italic"><em>I</em></button>
              <button type="button" data-cmd="formatBlock" data-value="h2">H2</button>
              <button type="button" data-cmd="formatBlock" data-value="p">P</button>
              <button type="button" data-cmd="fontSize" data-value="5">A+</button>
              <button type="button" data-cmd="insertLineBreak">↵</button>
            </div>
            <div id="editor-web_apps" class="rich-editor" contenteditable="true" data-placeholder="Describe your web app..."></div>
            <button class="btn btn-secondary" type="submit">Save Web App</button>
            <button class="btn btn-secondary" type="button" data-action="cancel-edit">Cancel Edit</button>
          </form>

          <form class="admin-form portfolio-form" data-type="projects">
            <input type="hidden" name="item-id" />
            <h3>Project Entry</h3>
            <input name="title" placeholder="Project title" required />
            <input name="url" placeholder="https://..." />
            <div class="editor-toolbar" data-for="editor-projects">
              <button type="button" data-cmd="bold"><strong>B</strong></button>
              <button type="button" data-cmd="italic"><em>I</em></button>
              <button type="button" data-cmd="formatBlock" data-value="h2">H2</button>
              <button type="button" data-cmd="formatBlock" data-value="p">P</button>
              <button type="button" data-cmd="fontSize" data-value="5">A+</button>
              <button type="button" data-cmd="insertLineBreak">↵</button>
            </div>
            <div id="editor-projects" class="rich-editor" contenteditable="true" data-placeholder="Describe your project..."></div>
            <button class="btn btn-secondary" type="submit">Save Project</button>
            <button class="btn btn-secondary" type="button" data-action="cancel-edit">Cancel Edit</button>
          </form>

          <form class="admin-form portfolio-form" data-type="python_packages">
            <input type="hidden" name="item-id" />
            <h3>Python Package Entry</h3>
            <input name="title" placeholder="Package name" required />
            <input name="url" placeholder="PyPI / GitHub URL" />
            <div class="editor-toolbar" data-for="editor-python_packages">
              <button type="button" data-cmd="bold"><strong>B</strong></button>
              <button type="button" data-cmd="italic"><em>I</em></button>
              <button type="button" data-cmd="formatBlock" data-value="h2">H2</button>
              <button type="button" data-cmd="formatBlock" data-value="p">P</button>
              <button type="button" data-cmd="fontSize" data-value="5">A+</button>
              <button type="button" data-cmd="insertLineBreak">↵</button>
            </div>
            <div id="editor-python_packages" class="rich-editor" contenteditable="true" data-placeholder="Describe your package..."></div>
            <button class="btn btn-secondary" type="submit">Save Python Package</button>
            <button class="btn btn-secondary" type="button" data-action="cancel-edit">Cancel Edit</button>
          </form>

          <div class="admin-list-wrap">
            <h3>Existing Items</h3>
            <div id="admin-item-list" class="list-stack"></div>
          </div>
        </div>

        <p id="admin-message" class="small-note"></p>
      </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script src="script.js"></script>
  </body>
</html>
